€TSON 5€SRP 31€DH//The Advanced BASIC Editor//€DF//Page |P//€TM0€HM1€FM1€BM1€LM3€PL66.........>.......*.......*.......*.......*.......*.......*.......*.....<(a) The assembler statements must be properly enclosed by [ ].(b) Variable  names  and Labels must not be the same as themnemonics (STA, JSR etc). (c) Comments must be delineated by '\', otherwise they will be taken as part of the mnemonic/operand field. (d) A space (or #) must separate mnemonics fromvariables/Labels, eg: LDABUFFER:JSRSEARCH  are  acceptable  to the assembler, but  Pack will be unable to separate themnemonic  from  the  variable  or label. (e) A  Variables cross reference of a  packed  assembler program  may produce spurious results if any of thevariables/labels have become A,X,Y..........*.......*.......*.......*.......*.......*.......*.......*.....<REM Lines If a program contains GOTOs to lines consisting of only REMarks,  youwill get 'No such line' on running the program after packing REMs.Ensure the program does not contain such lines BEFORE packing  REMs.3.5 Cross Reference Tables          3.5.1	T - Table Line References          	This produces two tables consisting of: .........*>......*.......*.......*.......*.......*.......*.......*.....<(a) Any linenumber references by GOTOs etc that  are  to nonexistent lines. (Similar to the "Failed at" produced bynormal renumbering).(b)  A table of every line (in numeric order) that is thetarget of a GOTO etc., together with the number of every linethat refers to it.A typical output might be:                  120 Nonexistent (450)        300 Nonexistent (450)                  100 (  340) (  450) ( 1010) (1400)        220 (  450) ( 1000)        430 (  430) (  900).........*.......*.......*.......*.......*.......*.......*.......*.....<          This would show that lines 120 and 300 are  both  mentioned  in  line450, but do not exist, and would cause an error in a running program.Line 100 is referred to by lines 340,450,1010 and 1400, while line 220is referred to in lines 450 and 1000 etc.          3.5.2	V - Variables Cross Reference Tables          Gives a table of every variable, PROC and FN name used in the programagainst  the  numbers of lines containing those names, along with thetotal number of occurrences.€PEThe order is: variables in first letter alphabetic order;  Procs  inprogram order; FNs in program order. eg:                  @% [0]        A% [3]            100     200     350        Able$ [4]          25      90     400                  Zoo( [2]           10      90                  PROC Val [2]     1000    1200        PROC Bob [3]       50     330    1250        FN Cash [2]       120     140                    Assembler  labels: If the program contains assembler, ensure that youdo not use labels or variables that are the  same  as  the  mnemonics(LDA, STX etc).          Note  that  a  line  number  is  only shown once, even if it containsmultiple references  to  the  same  variable.  @%  is  always  shown,although the number of occurrences may well be 0.3.5.3	ErrorsVARIABLE NAMES THE SAME AS TEXT (e.g. INPUT"Distance",Distance)Cross reference tables will not show a match if any of the text is thesame as a true variable name.Assembler If the program contains assembler statements the following apply:.........>.......*.......*.......*.......*.......*.......*.......*.....<(a) The assembler statements must be properly enclosed by [ ].(b) Variable  names  and Labels must not be the same as themnemonics (STA, JSR etc).(c) Comments must be delineated by '\', otherwise they will be taken as part of the mnemonic/operand field. (d) A space (or #) must separate mnemonics fromvariables/Labels, eg: LDABUFFER:JSRSEARCH  are  acceptable  to the assembler, but a Variables cross reference table will beunable to separate the mnemonic  from  the  variable  or label.(e) A Variables cross reference table of  a  packed  assembler program  may produce spurious results if any of thevariables/labels have become A,X,Y.3.6 Recovering Corrupted Programs.........*.......*.......*.......*.......*.......*.......*.......*.....<3.6.1  B - Bad Program Relink          This  attempts  to recover a "Bad Program" and make it into a useableor listable form. As each line is recovered it is listed. On reachinga possible endline, caused by a TOP marker or  line  numbers  out  ofsequence, the new value of TOP is shown, viz:€PE       TOP now &2345, more?_Entering Y will continue attempting to recover more lines. Continuingpast  the  real  end  of  the  program  will link in rubbish from thevariables area, not to be recommended.Control codes (ASCII < 32) formed by corrupted bytes are replaced  by"#".          Embedded VDU/CTRL Codes:          When a line  is listed by B any embedded VDU codes (ASCII 0 to &1F) are shown as G, U etc.. Subsequently, use of the screen editor on suchlines will not insert the original codes...>.......*.......*.......*.......*.......*.......*.......*.......*.....<3.7 Editing Facilities                  3.7.1  F - Format Listing          This  produces a formatted program listing, with every statement on aseparate line,  and  with  FOR/NEXT,  REPEAT/UNTIL  and  IF/THEN/ELSEstructures  correctly  indented  such  that the start and end commandsline up. A space is also forced between adjacent  reserved  words  ifone does not already exist.           3.7.2  @ -  List Program          Lists the entire program in normal LISTO1 format. Escape stops thelisting. Select paged mode if required.          3.7.3  K - Keyboard Mode          Allows  the  normal  screen  editor to be used on listed lines or newlines to be entered (or a single line to be deleted), without leavingthe Utilities environment. Attempting an immediate command (ie no linenumber given) will give a bell and the input will be ignored.If you are going to edit lines listed by a search$,  use  Ctrl  L  tolist them, as this does not insert the colour highlighting codes intothe listing.          3.8 *BLIST - Listing BASIC Program Other Than The Current Program.       SYNTAX: *BLIST FilenameLists  a  Basic program directly from disc (or tape), without loadingthe program. This allows one to look at a program without  destroyingthe program currently in memory.€PE3.9 *CLRResets the machine to its POWER-UP status, which is different to CTRL -BREAK [ especially on the BBC MASTER - Sideways RAM is not cleared i.e.ROM images will stay resident ].3.10 *FKEYS          Function Keys listing.          Displays the definition of any particular function key, or all of thekeys.  They  are  listed  in a form suitable for editing and re-entrywith the normal screen editor.          *FKEYS n (n=0-15) will display the definition of that particular key,	e.g.       *FKEYS 5 will show the current definition of the f5 key.       *FKEYS with no key number will display  the  definitions  of all	15 function  keys.  Further  information about the status of	the keys is also displayed:                 *FKEYS       *KEY 0 LIST|M       *KEY 1       *KEY 2       *KEY 3       *KEY 4       *KEY 5       *KEY 6       *KEY 7       *KEY 8       *KEY 9       *KEY 10 OLD|MRUN|M       *KEY 11       *KEY 12       *KEY 13       *KEY 14       *KEY 15                 f:user   Sf:user  Cf:user  SCf:off                    Status examples:          	f:user  The function keys are set as "Soft keys" (*FX225)          	Sf:&80   Shift+fn keys set to produce codes, base value &80.	(*FX226)          	Cf:&90   CTRL+fn key set to codes, base &90. (*FX227)€PE          	SCf:off  Shift+CTRL+fn keys are switched off. (*FX228)                    3.11 *MOVEMOVE a (Basic) Program, or block of memory.                    This command can have several forms:                    	(a) *MOVE Will  move  the  current  Basic program to the default PAGE value of&E00. The values of PAGE, LOMEM and TOP are adjusted to suit.          	(b) *MOVE <page>            Moves the current program to the given value of page. The  value  isrounded down to the nearest page boundary, ie:	*MOVE 1130will  move the program to PAGE = &1100.The values of PAGE, LOMEM andTOP are adjusted to suit.If there is  insufficient  room  between  <page>  and  HIMEM  for  theprogram,  the  program  will  not  be moved and an error message "BadAddress" given.                    	(c) *MOVE < Destination >< Source >< Finish >          Moves the block of memory between Source and  Finish  to  the  givendestination address ,ie:	*MOVE 34F0 2A16 2F34will move the area of memory between &2A16 and &2F34 up to &34F0...Note that this is exclusive of the finish address itself (as in *SAVEetc.)                    	(d) *MOVE < Destination >< Source >< +Extent >          In this case the number of bytes to be moved is given by the Extent.ie:	*MOVE 34F0 1A16 +1C3will move &1C3 bytes from &1A16 up to &34F0.          There is no restriction on any of the addresses in the last two forms€PEof  MOVE. All the moves are "intelligent", such that source memory isnot overwritten before being moved.3.12  *ROMID          ROM IDentification: Shows the Page no., Version no., Title andCopyright string for each sideways rom fitted.          	e.g. *ROMID                 C-23 PRES Plus 1 1.23 (C)        B-01 BASIC (C)1982 Acorn        .       .       7-76 ADT 1.78 (C)1986 ACP Ltd.          6-01 The BASIC Editor Plus 1.00 (C)1988       5-00 ADI 1.22 (C)1986 ACP Ltd.       4-00 Acorn ADFS 1.00 (C)1983 Acorn   *ROMID page address          To copy a Rom image down to ram, add the required rom page number (inhex) and address (also hex).          	ie. *ROMID B 2000          will  copy the rom in page B down to &3000. A command line consisting of the  Rom title and addresses  is  displayed,  which  can  then  becopied to save the image, viz:          	*SAVE BASIC 2000 +4000 D9CD 8000          The  execution  address  given  is the OS restart, so images reloadedinto ROM emulators will automatically be validated.          	*ROMID :drive          Checks every file on the disc  in  the  named  drive  for  valid Romimages,  listing  the  Version no.,  Title and Copyright string ofthose found.	ie: *ROMID :1                 1 01 The BASIC Editor Plus 1.00 (C)1988       2 01 BASIC (C)1982 Acorn       3 00 Acorn ADFS 1.00 (C)1983 Acorn       Load No.?_          Entering a file number (the numbers in the left column),  will thenload that file to &8000.          NOTE - IF USING ABR OR AP7 USE UNLOCK FIRST.*ROMID page ON/OFF          Disables  or reenables the rom in the given page socket. BASIC cannot         €PEbe disabled by this means. Roms which use the  main vectors  (  Filingsystems  etc),  will still respond to the standard  OS commands, *LOADetc, but not to their own unique * commands. ROMS currently  'on'  aretagged with '-' in *Romid listings.3.13 *SPACEDisplays Basic memory pointers and amount of memory free.Lists the values of PAGE, TOP, LOMEM, Vartop and HIMEM, together withthe current program size and the amount of memory left  between Vartopand  HIMEM.  (Vartop  is  the pointer to the next free byte above thecurrent Basic variables.)	i.e. *SPACE	HIMEM   = &7C00   	VARTOP  = &453E  	LOMEM   = &3F40   	TOP     = &3F40  	PAGE    = &1900	Program = 9792 bytes, (281 lines)	Bytes free = 14018All pointer values are in Hex, Program size and  Bytes  free  are indecimal.NOTE - NOT ALLOWABLE FROM ABE COMMAND SCREEN.3.14 *TXCOPYCopy text screen to printer.Copies the text in the current window to a printer (any make). If nowindow is set then the whole screen is copied.User defined characters in modes 0 to 6 are printed as spaces, thusallowing any printer to be used.3.15 *VLIST - Listing Variable ValuesThis can only be run from BASIC (ie. escape from the ABE Utilities and'EXIT' the editor).Lists all resident integers and current dynamic BASIC variables, withtheir values (in decimal). String contents are given in quotes. ForArrays only the dimensions are given. Line numbers for DEFPROC's andDEFFN's also given.*VLIST HEX€PEThis is as above except numeric variable values are given in Hex.Example: *VL.H         	 @% 90A	 A% FFFF	 .	 Z% 0	 Able$ "Alan"	 Answer 3F	 BLOCK 443A	 Field$(5,2)	 .	 zone$ "Red"	 PROC Colour  12300	 FN Key  13000                  	 *VLIST %$(RPFTo  list  only  particular types of variable, add the option from thelist below: eg. *VL.% lists only the Integer variables.        OPTIONS:          	 %  Integers	 $  Strings	 (  Arrays, (all types)	 R  Reals	 P  PROCs	 F  FNs	 =  Insert '=' between name and value.          The options may be quoted in any combination,  including  the  H  hexoption. No option will list all the variables.Errors: "Not BASIC"-  Cannot be used if the current language rom is notBASIC, ie VIEW, VIEWSHEET etc.Note that LOCAL variables in PROC/FN's which are not the same as  anyGlobal  will appear with zero values. ESCAPE however during a PROC/FNthat uses a local variable of the same name  as  a  global  one  willleave the global with the local value, the global value being lost.€PE